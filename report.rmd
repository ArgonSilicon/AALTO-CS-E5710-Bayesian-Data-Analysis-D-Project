---
title: "BDA - Project"
author: "A. Campbell, A. Ik√§heimonen, E. Suominen"
output: 
  pdf_document: 
    toc: yes
    toc_depth: 1
    highlight: haddock
urlcolor: blue
---

\newpage

# Introduction



# Overview of the Dataset

Load packages
```{r message=FALSE, warning=FALSE}
library(aaltobda)
library(LaplacesDemon)
library(cmdstanr)
library(posterior)
library(loo)
library(tidyr)
library(dplyr)
options(pillar.neg=FALSE)
library(ggplot2)
library(gridExtra)
library(bayesplot)
library(ggdist)
theme_set(bayesplot::theme_default(base_family = "sans"))
library(rprojroot)
SEED <- 614273
```

Load data
```{r}
data <- read.csv('Machine-Learning-with-R-datasets/insurance.csv')
head(data)
```

Check for null values
```{r}
colSums(is.na(data))
```

Remove region column and label encode sex and smoker columns
```{r}
data_clean <- subset(data, select = -c(region))
data_clean$sex <- ifelse(data_clean$sex == 'male',1,0)
data_clean$smoker <- ifelse(data_clean$smoker == 'yes',1,0)
head(data_clean)
```

Summary statistics of the data
```{r}
summary(data_clean)
```

Plot histogram of the insurance costs
```{r}
ggplot() +
  geom_histogram(aes(data_clean$charges), fill = 'steelblue', color = 'black') +
  labs(title = 'Medical costs billed by health insurance', x='Insurance cost ($)')
```


# Analysis Problem
## Models
## Priors
# Implementation
## Stan
## Results
### Convergence Diagnostics
### Post-Predictive Checks
### Sensitivity Analysis of Priors
## Discussion of issues and future improvements
# Conclusion
# Reflection